(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{13:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(2),r=n.n(c),l=n(3),i=n(4),s=n(6),d=n(5),u=n(7);window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var m=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={pc1:null,localDesc:null},n.startCall=function(){n.pc1.createOffer().then((function(e){return n.offer=e,n.pc1.setLocalDescription(e)})).then((function(){n.answerCall()})).catch(console.log)},n.receiveAnswer=function(){n.pc1.setRemoteDescription(n.answer).then(console.log).catch(console.log)},n.answerCall=function(){n.pc2.setRemoteDescription(n.offer).then((function(){return n.pc2.createAnswer()})).then((function(e){return n.answer=e,n.pc2.setLocalDescription(e)})).then((function(){n.receiveAnswer()})).catch(console.log)},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.getUserMedia({video:{facingMode:"user",height:{min:260,ideal:720,max:1080}},audio:!0},(function(t){e.localVideo.srcObject=t;var n=new RTCPeerConnection({});t.getTracks().forEach((function(e){return n.addTrack(e,t)})),n.onicecandidate=function(t){t.candidate&&e.pc2.addIceCandidate(t.candidate).then(console.log).catch(console.log)},n.onnegotiationneeded=function(){console.log("dd"),e.startCall()},n.ontrack=function(e){console.log("pc1 gotRemoteStream",e)},e.pc1=n;var a=new RTCPeerConnection({});a.onicecandidate=function(t){t.candidate&&e.pc1.addIceCandidate(t.candidate).then(console.log).catch(console.log)},a.ontrack=function(t){e.remoteVideo.srcObject=t.streams[0],console.log("pc2 gotRemoteStream",t)},e.pc2=a}),console.log)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("h1",null,"Local")),o.a.createElement("td",null,o.a.createElement("h1",null,"Remote"))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("video",{height:"480",width:"500",ref:function(t){return e.localVideo=t},controls:!0,autoPlay:!0}),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.startCall},"Start Call (STEP 1)"),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.receiveAnswer},"Receive Answer (STEP 3)")),o.a.createElement("td",null,o.a.createElement("video",{height:"480",width:"500",ref:function(t){return e.remoteVideo=t},controls:!0,autoPlay:!0}),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.answerCall},"Answer Call (STEP 2)"))))))}}]),t}(o.a.Component);r.a.render(o.a.createElement(m,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(13)}},[[8,1,2]]]);
//# sourceMappingURL=main.89c160ee.chunk.js.map