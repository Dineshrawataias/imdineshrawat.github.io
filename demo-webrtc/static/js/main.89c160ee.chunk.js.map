{"version":3,"sources":["App.js","index.js"],"names":["window","RTCPeerConnection","mozRTCPeerConnection","webkitRTCPeerConnection","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","App","state","pc1","localDesc","startCall","createOffer","then","offer","setLocalDescription","answerCall","catch","console","log","receiveAnswer","setRemoteDescription","answer","pc2","createAnswer","video","facingMode","height","min","ideal","max","audio","stream","localVideo","srcObject","getTracks","forEach","track","addTrack","onicecandidate","ev","candidate","addIceCandidate","onnegotiationneeded","ontrack","e","remoteVideo","streams","className","width","ref","node","controls","autoPlay","onClick","this","React","Component","ReactDOM","render","document","getElementById"],"mappings":"2KAEAA,OAAOC,kBAAoBD,OAAOC,mBAAqBD,OAAOE,sBAAwBF,OAAOG,wBAC7FC,UAAUC,aAAeD,UAAUC,cAAgBD,UAAUE,oBAAsBF,UAAUG,iBAAmBH,UAAUI,e,IA0I3GC,E,2MAvIbC,MAAQ,CACNC,IAAK,KACLC,UAAW,M,EAiEbC,UAAY,WACV,EAAKF,IAAIG,cACNC,MAAK,SAAAC,GAGN,OADA,EAAKA,MAAQA,EACN,EAAKL,IAAIM,oBAAoBD,MAErCD,MAAK,WACJ,EAAKG,gBAENC,MAAMC,QAAQC,M,EAGjBC,cAAgB,WACd,EAAKX,IAAIY,qBAAqB,EAAKC,QAChCT,KAAKK,QAAQC,KACbF,MAAMC,QAAQC,M,EAGnBH,WAAa,WACX,EAAKO,IAAIF,qBAAqB,EAAKP,OAChCD,MAAK,WACJ,OAAO,EAAKU,IAAIC,kBAEjBX,MAAK,SAAAS,GAEJ,OADA,EAAKA,OAASA,EACP,EAAKC,IAAIR,oBAAoBO,MAErCT,MAAK,WACJ,EAAKO,mBAENH,MAAMC,QAAQC,M,mFA7FE,IAAD,OAClBjB,UAAUC,aAAa,CACrBsB,MAAO,CACLC,WAAY,OACZC,OAAQ,CACNC,IAAK,IACLC,MAAO,IACPC,IAAK,OAGTC,OAAO,IACN,SAAAC,GACD,EAAKC,WAAWC,UAAYF,EAE5B,IAAMvB,EAAM,IAAIV,kBAAkB,IAIlCiC,EAAOG,YAAYC,SAAQ,SAACC,GAAD,OAAW5B,EAAI6B,SAASD,EAAOL,MAE1DvB,EAAI8B,eAAiB,SAAAC,GAChBA,EAAGC,WAEJ,EAAKlB,IAAImB,gBAAgBF,EAAGC,WACzB5B,KAAKK,QAAQC,KACbF,MAAMC,QAAQC,MAIrBV,EAAIkC,oBAAsB,WACxBzB,QAAQC,IAAI,MACZ,EAAKR,aAGPF,EAAImC,QAAU,SAAAC,GACZ3B,QAAQC,IAAI,sBAAuB0B,IAGrC,EAAKpC,IAAMA,EAEX,IAAMc,EAAM,IAAIxB,kBAAkB,IAIlCwB,EAAIgB,eAAiB,SAAAC,GAChBA,EAAGC,WAEJ,EAAKhC,IAAIiC,gBAAgBF,EAAGC,WACzB5B,KAAKK,QAAQC,KACbF,MAAMC,QAAQC,MAIrBI,EAAIqB,QAAU,SAAAC,GACZ,EAAKC,YAAYZ,UAAYW,EAAEE,QAAQ,GACvC7B,QAAQC,IAAI,sBAAuB0B,IAGrC,EAAKtB,IAAMA,IACVL,QAAQC,O,+BAqCH,IAAD,OACP,OACE,yBAAK6B,UAAU,OACb,+BACE,+BACE,4BACE,4BACE,sCAEF,4BACE,wCAGJ,4BACE,4BACE,2BAAOrB,OAAO,MAAMsB,MAAM,MAAMC,IAAK,SAAAC,GAAI,OAAI,EAAKlB,WAAakB,GAAMC,UAAQ,EAACC,UAAQ,IACtF,6BACA,4BAAQC,QAASC,KAAK5C,WAAtB,uBACA,6BACA,4BAAQ2C,QAASC,KAAKnC,eAAtB,4BAEF,4BACE,2BAAOO,OAAO,MAAMsB,MAAM,MAAMC,IAAK,SAAAC,GAAI,OAAI,EAAKL,YAAcK,GAAMC,UAAQ,EAACC,UAAQ,IACvF,6BACA,4BAAQC,QAASC,KAAKvC,YAAtB,iC,GA9HEwC,IAAMC,WCDxBC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.89c160ee.chunk.js","sourcesContent":["import React from 'react';\n\nwindow.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\nnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\nclass App extends React.Component {\n  state = {\n    pc1: null,\n    localDesc: null\n  };\n\n  componentDidMount() {\n    navigator.getUserMedia({\n      video: {\n        facingMode: 'user',\n        height: {\n          min: 260,\n          ideal: 720,\n          max: 1080\n        }\n      },\n      audio: true\n    }, stream => {\n      this.localVideo.srcObject = stream;\n\n      const pc1 = new RTCPeerConnection({\n        // \"iceServers\": [{ \"url\": \"stun:stun.1.google.com:19302\" }]\n      });\n\n      stream.getTracks().forEach((track) => pc1.addTrack(track, stream));\n  \n      pc1.onicecandidate = ev => {\n        if(ev.candidate) {\n          // console.log('onicecandidate', ev.candidate);\n          this.pc2.addIceCandidate(ev.candidate)\n            .then(console.log)\n            .catch(console.log);\n        }\n      };\n\n      pc1.onnegotiationneeded = () => {\n        console.log('dd')\n        this.startCall();\n      }\n\n      pc1.ontrack = e => {\n        console.log('pc1 gotRemoteStream', e);\n      }\n\n      this.pc1 = pc1;\n\n      const pc2 = new RTCPeerConnection({\n        // \"iceServers\": [{ \"url\": \"stun:stun.1.google.com:19302\" }]\n      });\n    \n      pc2.onicecandidate = ev => {\n        if(ev.candidate) {\n          // console.log('onicecandidate', ev.candidate);\n          this.pc1.addIceCandidate(ev.candidate)\n            .then(console.log)\n            .catch(console.log);\n        }\n      };\n\n      pc2.ontrack = e => {\n        this.remoteVideo.srcObject = e.streams[0];\n        console.log('pc2 gotRemoteStream', e);\n      }\n\n      this.pc2 = pc2;\n    }, console.log);\n  }\n\n  startCall = () => {\n    this.pc1.createOffer()\n      .then(offer => {\n      // console.log(\"offer\", offer);\n      this.offer = offer;\n      return this.pc1.setLocalDescription(offer);\n    })\n    .then(() => {\n      this.answerCall();\n    })\n    .catch(console.log);\n  }\n\n  receiveAnswer = () => {\n    this.pc1.setRemoteDescription(this.answer)\n      .then(console.log)\n      .catch(console.log);\n  }\n\n  answerCall = () => {\n    this.pc2.setRemoteDescription(this.offer)\n      .then(() => {\n        return this.pc2.createAnswer();\n      })\n      .then(answer => {\n        this.answer = answer;\n        return this.pc2.setLocalDescription(answer);\n      })\n      .then(() => {\n        this.receiveAnswer();\n      })\n      .catch(console.log);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <table>\n          <tbody>\n            <tr>\n              <td>\n                <h1>Local</h1>\n              </td>\n              <td>\n                <h1>Remote</h1>\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <video height=\"480\" width=\"500\" ref={node => this.localVideo = node} controls autoPlay></video>\n                <br/>\n                <button onClick={this.startCall}>Start Call (STEP 1)</button>\n                <br/>\n                <button onClick={this.receiveAnswer}>Receive Answer (STEP 3)</button>\n              </td>\n              <td>\n                <video height=\"480\" width=\"500\" ref={node => this.remoteVideo = node} controls autoPlay></video>\n                <br/>\n                <button onClick={this.answerCall}>Answer Call (STEP 2)</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}